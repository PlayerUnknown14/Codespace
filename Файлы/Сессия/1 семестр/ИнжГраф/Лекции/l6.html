<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1251">
<title>Лекция 6</title>
<link rel="stylesheet" href="main.css" type="text/css">
</head>
<body lang=RU bgcolor="#FFFFFF">
<table width="1000" border="0" cellspacing="0" cellpadding="0" align="center">
  <tr>
    <td class="title1"><a name="matr"><h2><center>Матричное представление 3D преобразований</center></h2></td>
  </tr>
  <tr>
    <td>По аналогии с 2D преобразованиями, которые описываются матрицами 3x3, 3D преобразования могут быть представлены в виде матриц 4x4. И тогда трехмерная точка (X, Y, Z) записывается в однородных координатах как (W*X, W*Y, W*Z, W),  где W=/0. Если W=/1  для получения декартовых координат точки (X, Y, Z) первые три ко-ординаты делятся на W.
Две точки H1 и H2 в пространстве однородных координат описывают одну и ту же точку 3D пространства только в том случае, если H1=cH2 для любой константы с=/0
Система координат правосторонняя. Перевод каждой положительной полуоси в другую, осуществляется против часовой стрелки.

            <p><center><img src="lecture6/1.bmp" width="380" height="350"></center></p>
      
<p>В машинной графике, часто удобнее использоваться левосторонней системой ко-ординат. Это позволяет легко интерпретировать тот шаг, что точки с большим Z нахо-дятся дальше от наблюдателя. </p>
       <p><center><img src="lecture6/2.bmp" width="400" height="250"></center></p>
       <p> Отметим, что в левосторонней системе координат положительными поворотами будут повороты, выполняемые по часовой стрелке.</p>
<p class="heading2"><h2><center><a name="3d-per"></a>Трехмерный перенос</center></h2></p>
<p>Трехмерный перенос является простым расширением двумерного:</p>
<p><center><img src="lecture6/3.bmp" width="400" height="250"></center></p>
<p class="heading2"><h2><center><a name="msh"></a>Масштабирование</center></h2></p>
<p><center><img src="lecture6/4.bmp" width="400" height="250"></center></p>
<p class="heading2"><h2><center><a name="pov"></a>Поворот</center></h2></p>
<p>Двумерный поворот, описанный ранее, является в тоже время трехмерным пово-ротом вокруг оси Z. В 3D поворот относительно Z описывается следующим образом:</p>
<p><center><img src="lecture6/5.bmp" width="400" height="250"></center></p>
<p>Это легко проверить: в результате поворота на 90гр. вектора [1 0 0 1], являющегося единичным вектором оси X,  должен получиться единичный вектор оси Y [0 1 0 1].
Вычисляя произведение</p>
<p><center><img src="lecture6/6.bmp" width="400" height="250"></center></p>
<p> получаем предсказанный результат.
Матрица поворота вокруг оси X имеет вид
</p>
<p><center><img src="lecture6/7.bmp" width="400" height="250"></center></p>
<p>       Матрица поворота вокруг оси  Y записывается в виде</p>
<p><center><img src="lecture6/8.bmp" width="400" height="250"></center></p>
<p class="heading2"><h2><center><a name="3d-pre"></a>Композиция 3D преобразований</center></h2></p>
<p>Объединением элементарных 3D преобразований можно получить сложные пре-образования, выполняемые над объектами в моделируемой сцене. Пример сложного преобразования рассмотрим на практической задаче.</p>
<p>Задача:</p>
<p>Преобразовать отрезки [P1P2] и [P1P3] из начальной позиции в конечную. P1 в начало координат, P1P2 вдоль оси Z, P1P3 в плоскости YOZ, где ось Y положительна. На длины отрезков преобразования не влияют.</p>
<p><center><img src="lecture6/9.bmp" width="500" height="250"></center></p>
<p>Этапы решения:</p>
<p>1. Перенос точки P1 в начало координат.</p>
<p>2. Поворот вокруг оси Y до совмещения P1P2 c плоскостью YOZ.</p>
<p>3. Поворот вокруг оси X до совмещения P1P2 c отрицательным Z.</p>
<p>4. Поворот вокруг оси Z  до совмещения P1P3 c плоскостью YOZ.</p>
<p class="heading2"><h2><center><a name="step1"></a>Шаг 1.</center></h2></p>
<p>Перенос P1 в 0</p>
<p><center><img src="lecture6/10.bmp" width="400" height="250"></center></p>
<p>Применение переноса к P1, P2, P3  дает следующие результаты:</p>
<p><center><img src="lecture6/11.bmp" width="400" height="250"></center></p>
<p class="heading2"><h2><center><a name="step2"></a>Шаг 2.</center></h2></p>
<p>Поворот вокруг оcи Y.
Поворот на положительный угол 0 для которого: </p>
<p><center><img src="lecture6/13.bmp" width="400" height="60"></center></p>
<p><center><img src="lecture6/12.bmp" width="400" height="250"></center></p>
<p>Подставим эти выражения в матрицу Ry(0), тогда </p>
<p><center><img src="lecture6/14.bmp" width="600" height="250"></center></p>
<p>Как и ожидалось x-компонента  P2''=0.</p>
<p class="heading2"><h2><center><a name="step3"></a>Шаг 3.</center></h2></p>
<p>Поворот вокруг оси X. Рисунок после второго шага.</p>
<p><center><img src="lecture6/15.bmp" width="400" height="250"></center></p>
<p class="heading2"><h2><center><a name="step4"></a>Шаг 4.</center></h2></p>
<p>Рисунок после  шага 3.</p>
<p><center><img src="lecture6/16.bmp" width="700" height="300"></center></p>
<p><center><img src="lecture6/17.bmp" width="500" height="250"></center></p>

  <tr>
    <td>&nbsp;</td>
  </tr>
</table>
</body>
</html>
